#解除Ctrl+b 与前缀的对应关系
unbind C-b

#设置前缀为ALT + w
set -g prefix M-w

#将r 设置为加载配置文件，并显示"reloaded!"信息
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Moving between panes with prefix-h, j, k, l
#up
bind-key k select-pane -U
#down
bind-key j select-pane -D
#left
bind-key h select-pane -L
#right
bind-key l select-pane -R

# ALT 键 + hjkl 选中窗口
bind -n M-h select-pane -L
bind -n M-l select-pane -R
bind -n M-j select-pane -U
bind -n M-k select-pane -D

# 调整窗口大小
# bind -r <Left>  resize-pane -L 5
# bind -r <Right> resize-pane -R 5
# bind -r <Up>    resize-pane -U 5
# bind -r <Down>  resize-pane -D 5
bind -r Left  resize-pane -L 3
bind -r Right resize-pane -R 3
bind -r Up    resize-pane -U 3
bind -r Down  resize-pane -D 3


# Mouse support
set -g mouse on

# 绑定鼠标拖动结束事件，只复制但不取消copy-mode，防止跳底
# bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-selection


# 两次按键之间间隔时间小于设置，会认为是“连续按键”
set -g repeat-time 800

# 开启vi模式<a-[>
setw -g mode-keys vi

# mac中复制到系统剪切板
# bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

if-shell "command -v wl-copy >/dev/null" \
    "bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'wl-copy'"

if-shell "command -v xclip >/dev/null" \
    "bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -selection clipboard -in'"

if-shell "command -v pbcopy >/dev/null" \
    "bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'"

# mac鼠标选中就复制
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode    MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"

# 启动tmux session时无论在哪里都切换到家目录
set-option -g default-command "cd ~ && exec $SHELL -l"

# 在 prefix 键表里重绑（按 Alt-w 后再按这些键）
unbind -T prefix '"'
unbind -T prefix %
# 打开新的面板和之前目录保持一致
bind -T prefix '"' split-window -v -c '#{pane_current_path}' 'exec $SHELL'
bind -T prefix %   split-window -h -c '#{pane_current_path}' 'exec $SHELL'

# Set the default terminal terminfo
# set -g default-terminal "xterm"
set -g default-terminal "xterm-256color"
# set -g default-terminal "tmux-256color"
# True colour support
# set -as terminal-overrides ",xterm*:Tc"
set-option -ga terminal-overrides ",xterm:Tc"

# 设置状态栏到顶部
# set-option -g status-position top
# Set the status line's color
# set -g status-style fg=white,bg=purple
set -g status-style fg=black,bg=cyan

# Set the color of the window list
# setw -g window-status-style fg=blue,bold

# Set the color of the active window
setw -g window-status-current-style fg=white,bold,bg=purple

set -g history-limit 10000000

set -g status-right "%Y-%m-%d %H:%M "

# tpm
# List of plugins
set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'

# Other 
set -g @plugin 'sainnhe/tmux-fzf'

# tmux主题
# set -g @plugin 'catppuccin/tmux#latest'
# set -g @catppuccin_flavour 'macchiato' # latte,frappe, macchiato or mocha

# set -g @plugin 'dracula/tmux'

# set -g @plugin 'o0th/tmux-nova'
# set -g @nova-nerdfonts true
# set -g @nova-nerdfonts-left 
# set -g @nova-nerdfonts-right 
# set -g @nova-pane-active-border-style "#44475a"
# set -g @nova-pane-border-style "#282a36"
# set -g @nova-status-style-bg "#4c566a"
# set -g @nova-status-style-fg "#d8dee9"
# set -g @nova-status-style-active-bg "#89c0d0"
# set -g @nova-status-style-active-fg "#2e3540"
# set -g @nova-status-style-double-bg "#2d3540"
# set -g @nova-pane "#I#{?pane_in_mode,  #{pane_mode},}  #W"
# set -g @nova-segment-mode "#{?client_prefix,Ω,ω}"
# set -g @nova-segment-mode-colors "#78a2c1 #2e3440"
# set -g @nova-segment-whoami "#(whoami)@#h"
# set -g @nova-segment-whoami-colors "#78a2c1 #2e3440"
# set -g @nova-rows 0
# set -g @nova-segments-0-left "mode"
# set -g @nova-segments-0-right "whoami"

set -g @plugin 'wfxr/tmux-power'
set -g @tmux_power_theme 'violet'
# set -g @tmux_power_theme 'gold'
# set -g @tmux_power_theme 'forest'
# set -g @tmux_power_theme 'redwine'

# set -g @plugin 'jimeh/tmux-themepack'

# set -g @plugin 'fabioluciano/tmux-tokyo-night'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
